[controller_params]
SIM_MODE = false
MOTOR_HZ = 200.0           # Motor PWM Freq
SAMPLE_RATE_HZ = 50.0      # dt = 1 / SAMPLE_RATE_HZ : read IMU 20msec

# --- FLC Scaling factors ---
[flc_scaling]
THETA_MAX_RAD = 3.0          # use full ±π rad sensing range
OMEGA_MAX_RAD_S = 4.0        # previously computed peak stabilizable ω

# --- Membership Functions ---
[membership_functions.theta]
# LECCW = [-1.6, -1.6, -1.00, -0.5]
# MECCW = [-1.00, -0.50, -0.00]
# SECCW = [-0.50, -0.25,  0.00]
# NE    = [-0.10,  0.00,  0.10]
# SECW  = [-0.00,  0.25,  0.50]
# MECW  = [ 0.00,  0.50,  1.00]
# LECW  = [ 0.50,  1.00,  1.6,  1.6]

LECCW = [-1.0, -1.0, -0.75]
MECCW = [-1.0, -0.75, -0.25]
SECCW = [-0.75, -0.25, 0.0]
NE    = [-0.10,  0.0,  0.10]
SECW  = [ 0.0,   0.25, 0.75]
MECW  = [ 0.25,  0.75, 1.0]
LECW  = [ 0.75,  1.0,  1.0]

[membership_functions.omega]
# LVCCW = [-1.5, -1.5, -1.0, -0.5]
# SVCCW = [-1.0, -0.5,  0.0]
# NV    = [-0.5,  0.0,  0.5]
# SVCW  = [ 0.0,  0.5,  1.0]
# LVCW  = [ 0.5,  1.0,  1.5,  1.5]

LVCCW = [-1.0, -1.0, -0.5]
SVCCW = [-1.0, -0.5,  0.0]
NV    = [-0.25, 0.0, 0.25]
SVCW  = [ 0.0,  0.5, 1.0]
LVCW  = [ 0.5,  1.0, 1.0]

# ============================================================
# NEW, STABLE, NEGATIVE-FEEDBACK SUGENO RULE BASE
# ============================================================

# 1  LECCW + LVCCW  = large CCW angle + large CCW velocity
[[rule_base]]
rule = ["LECCW", "LVCCW"]
output = { theta_coeff = -1.0, omega_coeff = -1.0, bias = 0 }

# 2  LECCW + SVCCW
[[rule_base]]
rule = ["LECCW", "SVCCW"]
output = { theta_coeff = -1.0, omega_coeff = -0.6, bias = 0 }

# 3  LECCW + NV
[[rule_base]]
rule = ["LECCW", "NV"]
output = { theta_coeff = -1.0, omega_coeff = -0.2, bias = 0 }

# 4  LECCW + SVCW
[[rule_base]]
rule = ["LECCW", "SVCW"]
output = { theta_coeff = -1.0, omega_coeff = -0.6, bias = 0 }

# 5  LECCW + LVCW
[[rule_base]]
rule = ["LECCW", "LVCW"]
output = { theta_coeff = -1.0, omega_coeff = -1.0, bias = 0 }


# ============================================================
# MEDIUM CCW
# ============================================================
# 6
[[rule_base]]
rule = ["MECCW", "LVCCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.6, bias = 0 }

# 7
[[rule_base]]
rule = ["MECCW", "SVCCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.4, bias = 0 }

# 8
[[rule_base]]
rule = ["MECCW", "NV"]
output = { theta_coeff = -0.7, omega_coeff = -0.1, bias = 0 }

# 9
[[rule_base]]
rule = ["MECCW", "SVCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.4, bias = 0 }

# 10
[[rule_base]]
rule = ["MECCW", "LVCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.6, bias = 0 }


# ============================================================
# SMALL CCW
# ============================================================

# 11
[[rule_base]]
rule = ["SECCW", "LVCCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.4, bias = 0 }

# 12
[[rule_base]]
rule = ["SECCW", "SVCCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.3, bias = 0 }

# 13
[[rule_base]]
rule = ["SECCW", "NV"]
output = { theta_coeff = -0.4, omega_coeff = -0.1, bias = 0 }

# 14
[[rule_base]]
rule = ["SECCW", "SVCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.3, bias = 0 }

# 15
[[rule_base]]
rule = ["SECCW", "LVCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.4, bias = 0 }


# ============================================================
# EQUILIBRIUM (NE)
# ============================================================

# 16
[[rule_base]]
rule = ["NE", "LVCCW"]
output = { theta_coeff = 0.0, omega_coeff = -0.3, bias = 0 }

# 17
[[rule_base]]
rule = ["NE", "SVCCW"]
output = { theta_coeff = 0.0, omega_coeff = -0.2, bias = 0 }

# 18
[[rule_base]]
rule = ["NE", "NV"]
output = { theta_coeff = 0.0, omega_coeff = 0.0, bias = 0 }

# 19
[[rule_base]]
rule = ["NE", "SVCW"]
output = { theta_coeff = 0.0, omega_coeff = -0.2, bias = 0 }

# 20
[[rule_base]]
rule = ["NE", "LVCW"]
output = { theta_coeff = 0.0, omega_coeff = -0.3, bias = 0 }


# ============================================================
# SMALL CW
# ============================================================

# 21
[[rule_base]]
rule = ["SECW", "LVCCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.4, bias = 0 }

# 22
[[rule_base]]
rule = ["SECW", "SVCCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.3, bias = 0 }

# 23
[[rule_base]]
rule = ["SECW", "NV"]
output = { theta_coeff = -0.4, omega_coeff = -0.1, bias = 0 }

# 24
[[rule_base]]
rule = ["SECW", "SVCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.3, bias = 0 }

# 25
[[rule_base]]
rule = ["SECW", "LVCW"]
output = { theta_coeff = -0.4, omega_coeff = -0.4, bias = 0 }


# ============================================================
# MEDIUM CW
# ============================================================

# 26
[[rule_base]]
rule = ["MECW", "LVCCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.6, bias = 0 }

# 27
[[rule_base]]
rule = ["MECW", "SVCCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.4, bias = 0 }

# 28
[[rule_base]]
rule = ["MECW", "NV"]
output = { theta_coeff = -0.7, omega_coeff = -0.1, bias = 0 }

# 29
[[rule_base]]
rule = ["MECW", "SVCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.4, bias = 0 }

# 30
[[rule_base]]
rule = ["MECW", "LVCW"]
output = { theta_coeff = -0.7, omega_coeff = -0.6, bias = 0 }


# ============================================================
# LARGE CW
# ============================================================

# 31
[[rule_base]]
rule = ["LECW", "LVCCW"]
output = { theta_coeff = -1.0, omega_coeff = -1.0, bias = 0 }

# 32
[[rule_base]]
rule = ["LECW", "SVCCW"]
output = { theta_coeff = -1.0, omega_coeff = -0.6, bias = 0 }

# 33
[[rule_base]]
rule = ["LECW", "NV"]
output = { theta_coeff = -1.0, omega_coeff = -0.2, bias = 0 }

# 34
[[rule_base]]
rule = ["LECW", "SVCW"]
output = { theta_coeff = -1.0, omega_coeff = -0.6, bias = 0 }

# 35
[[rule_base]]
rule = ["LECW", "LVCW"]
output = { theta_coeff = -1.0, omega_coeff = -1.0, bias = 0 }

# ============================================================
# FLC Input Scaling Block
# These ranges convert physical theta (rad) and omega (rad/s)
# into normalized fuzzy inputs in [-1, +1].
# ============================================================

[scaling]
THETA_MAX_RAD = 0.50        # ≈ 20 degrees
OMEGA_MAX_RAD_S = 4.0       # based on physical wheel dynamics
