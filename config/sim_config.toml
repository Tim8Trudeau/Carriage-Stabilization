
# ============================================================
# Carriage Stabilization â€” Physics Simulation Configuration
# For: carriage_simulator.py (inertia-based model)
# ============================================================

# ============================================================
# Simulation initial conditions
# ============================================================
[initial_conditions]
THETA_INITIAL_RAD   = 0.05     # rad
OMEGA_INITIAL_RAD_S = 0.0      # rad/s
START_TIME_S        = 0.0

# ============================================================
# Mechanical plant parameters (updated)
# ============================================================
[plant]
I = 0.42             # kg*m^2  UPDATED inertia (computed from mass & geometry)
m = 1.088            # kg      UPDATED actual carriage mass (2.4 lb)
r = 0.622            # m       UPDATED COM radius
b = 0.004            # N*m*s   viscous damping
g = 9.80665          # m/s^2

# ============================================================
# Motor model (match MotorParams dataclass)
# ============================================================
[motor]
# Direct physical torque model (no electrical model)
# Two friction rollers, each 0.16 N*m stall torque at shaft.
tau_motor_one = 0.16      # N*m per roller
n_rollers     = 2         # two synchronized motors
r_roller      = 0.012     # m   (24 mm diameter)
r_wheel       = 0.6096    # m   (48 in ID)

# Torque saturation
tau_max    = 0.16        # N*m (estimated stall torque)

# ============================================================
# Simulation numeric parameters (match SimConfig dataclass)
# ============================================================
[simulation]
dt            = 0.002
steps_per_log = 10
tau_ext       = 0.0
DURATION_S    = 20.0

# ============================================================
# Controller selection
# ============================================================
[controller]
type = "FLC"                  # "PD", "FLC", "NONE"

# PD controller params
Kp = -2.0
Kd = -0.4

FLC_CONFIG_PATH = "config/flc_config.toml"  # Path to fuzzy logic controller file

# ============================================================
# Logging controls (optional)
# ============================================================
[logging]
LEVEL = "INFO"
WRITE_CSV = false

# ============================================================
# Impulse disturbances
# ============================================================
[impulse]
enable = true

[[impulse.events]]
t0 = 5.0
magnitude = 0.4

[[impulse.events]]
t0 = 25.0
magnitude = -0.4

# ============================================================
# Step disturbances
# ============================================================
[step]
enable = true

[[step.events]]
t0 = 10.0
t1 = 15.0
magnitude = 0.03

# ============================================================
# Deterministic sine wave
# ============================================================
[sine]
enable = true
amplitude = 0.2
frequency = 0.5
phase = 0.0
t_start = 5.0
t_end = 20.0

# ============================================================
# Random-phase sine wave
# ============================================================
[rnd_sine]
enable = true
amplitude = 0.015
frequency = 0.2
t_start = 5.0
t_end = 20.0

# ============================================================
# Multiple sine harmonics
# ============================================================
[[multi_sine]]
enable = true
amplitude = 0.01
frequency = 0.75
phase = 0.0
t_start = 20.0
t_end = 40.0

# ============================================================
# Noise
# ============================================================
[noise]
enable = false
std = 0.02
